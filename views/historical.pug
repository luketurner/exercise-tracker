extends _layout.pug

block content
  h1.title= exercise.name
  each param of exercise.parameters
    canvas(id="chart-"+param.id)
  script!= "window.exerciseTracker.buildChart("+JSON.stringify(exercise)+","+JSON.stringify(historicalSets)+");"
  table.table
    thead
      tr
        td Date
        each param of exercise.parameters
            td= param.name
    tbody
      each set of historicalSets
        tr
          td= set.date
          each param of exercise.parameters
            -
              var paramValue = set.parameters[param.id]
              function hasValue(v) {
                if (v === 0 || v === "") return true;
                return !!v;
              }
            td= hasValue(paramValue.value) ? paramValue.value : hasValue(paramValue.minutes) ? paramValue.minutes : paramValue